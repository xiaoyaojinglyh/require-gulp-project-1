require(["config"],function(){require(["jquery","header","footer","cookie","template"],function(l,t,c,e,i){new Promise(function(t,e){l("header").load("/html/component/header.html",function(){t()})}).then(function(){t.init(),t.click(),t.welcome()}).then(function(){l("#my_cart");var o,t=l.cookie("product"),r=(l(".priceBtn"),l(".car_products"),JSON.parse(t)),e=i("html-product",{products:r});function a(){for(var t=l.cookie("product"),e=JSON.parse(t),c=0,i=l(".single-check"),n=0;n<i.length;n++){l(i[n]).prop("checked")&&(c+=e[n].num*e[n].price);var r=JSON.stringify(e);l.cookie("product",r,{path:"/",expires:5})}l("#Price").html("商品金额：￥"+c),l(".addPrice span").html("(订单可得积分318)合计:￥"+c)}l(".tbody").html(e),l(".tbody").on("click",".delBtn",function(){var t=l.cookie("product");t=JSON.parse(t);var c=this;l(".delBox").css({display:"block"}),l("#okBtn").click(function(){l(".delBox").css({display:"none"}),l(c).parent().parent().remove();for(var t=0;t<r.length;t++)if(l(c).parent().parent().attr("data-id")==r[t].id){r.splice(t,1),null!==e&&0!==r.length||(l(".car_box").css({display:"none"}),l(".bigBox").css({display:"block"}),l(".cart-empty").css({display:"block"}));var e=JSON.stringify(r);l.cookie("product",e,{path:"/",expires:5})}a()}),l("#cencelBtn").click(function(){l(".delBox").css({display:"none"})})}),l(".btn").click(function(){var t=l(this).next().val(),e=l.cookie("product"),c=JSON.parse(e);if((t=--t)<1)alert("亲，见底啦！");else{l(this).next().val(t);var i=l(this).parent().prev().text().slice(1);o=t*i,l(this).parent().next().text("￥"+o);for(var n=0;n<c.length;n++){l(this).parent().parent().attr("data-id")==c[n].id&&(c[n].num=t);var r=JSON.stringify(c);l.cookie("product",r,{path:"/",expires:5})}a()}}),l(".btn1").click(function(){var t=l(this).prev().val(),e=l.cookie("product"),c=JSON.parse(e);t=++t,l(this).prev().val(t);var i=l(this).parent().prev().text().slice(1);o=t*i,l(this).parent().next().text("￥"+o);for(var n=0;n<c.length;n++){l(this).parent().parent().attr("data-id")==c[n].id&&(c[n].num=t);var r=JSON.stringify(c);l.cookie("product",r,{path:"/",expires:5})}a()}),l(".all-check").click(function(t){(function(){var t=l(this).prop("checked");l(".single-check").prop("checked",t)}).call(this),a()}),a(),l(".single-check").click(function(t){for(var e=l(".single-check"),c=0,i=0;i<e.length;i++)l(e[i]).prop("checked")&&c++;if(c===e.length){l(".all-check").prop("checked",!0);var n=JSON.stringify(r);l.cookie("product",n,{path:"/",expires:5})}else l(".all-check").prop("checked",!1);a()}),l(".mock_select").click(function(){l(this).next().css({display:"block"});for(var t=l(this).next().children("p"),e=l(this).next().children("input"),c=l(this).next().children("button"),i=0;i<t.length;i++)t.eq(i).click(function(){l(this).parent().css({display:"none"}),l(this).parent().prev().html(l(this).html())});l(c).click(function(){l(this).parent().css({display:"none"}),l(this).parent().prev().html(l(e).val())})})});var n=l.cookie("product"),r=JSON.parse(n);null!==n&&0!==r.length||(l(".car_box").css({display:"none"}),l(".bigBox").css({display:"block"}),l(".cart-empty").css({display:"block"})),new Promise(function(t,e){l("footer").load("/html/component/footer.html",function(){t(),c.init()})})})});